<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stork Badge Generator â€” Navy Theme</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
  <style>
    body { background-color: #0B1E40; font-family: sans-serif; }
    .badge-container { perspective: 1000px; }
    .badge-card { width: 360px; transform-style: preserve-3d; transition: transform 0.8s; }
    .badge-card.flipped { transform: rotateY(180deg); }
    .badge-front, .badge-back { backface-visibility: hidden; border-radius: 1rem; overflow: hidden; color: white; background-color: #0B1E40; box-shadow: 0 10px 20px rgba(0,0,0,0.2); }
    .badge-back { transform: rotateY(180deg); }
    .avatar { width: 96px; height: 96px; border-radius: 9999px; display: grid; place-items: center; font-weight: 700; font-size: 28px; position: relative; overflow: hidden; }
    .avatar img { width: 100%; height: 100%; object-fit: cover; }
    .role-icon { width: 28px; height: 28px; border-radius: 9999px; display: inline-grid; place-items: center; font-size: 16px; background-color: #14B8A6; color: white; flex-shrink: 0; }
    .overlay-icon { position: absolute; bottom: -2px; right: -2px; width: 32px; height: 32px; border-radius: 9999px; border: 2px solid white; display: flex; align-items: center; justify-content: center; background-color: #14B8A6; }
    .watermark { position: absolute; opacity: 0.05; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 80%; height: 80%; object-fit: contain; }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen p-6">

<div class="badge-container">
  <div class="badge-card" id="badgeCard">

    <!-- FRONT -->
    <div class="badge-front relative p-6">
      <img src="community-logo.png" class="watermark" alt="Watermark">
      <div class="flex items-center gap-4">
        <div class="avatar" id="avatarFront">
          <span id="avatarInitialsFront">YA</span>
          <img id="avatarImgFront" src="" style="display:none;">
          <div class="overlay-icon" id="roleOverlayFront">ðŸª½</div>
        </div>
        <div>
          <h2 id="displayNameFront" class="text-white font-bold text-lg">Username</h2>
          <div class="flex items-center gap-1"><div id="roleIconInlineFront" class="role-icon">ðŸª½</div><span id="displayRoleFront" class="text-teal-400">Winged</span></div>
          <div id="displayAKAFront" class="text-white text-sm italic">A.k.a Nickname</div>
        </div>
      </div>
      <div class="absolute bottom-2 left-2 flex items-center gap-2">
        <img src="community-logo.png" class="w-8 h-8">
        <span class="text-xs">Powered by Stork</span>
      </div>
    </div>

    <!-- BACK -->
    <div class="badge-back relative p-6">
      <img src="community-logo.png" class="watermark" alt="Watermark">
      <div class="flex flex-col items-center gap-3">
        <div class="flex items-center gap-2">
          <span id="displayHandleBack" class="text-white font-bold">@Username</span>
          <div id="roleIconInlineBack" class="role-icon">ðŸª½</div>
          <span id="displayRoleBack" class="text-teal-400">Winged</span>
        </div>
        <div id="qrcode" class="bg-white p-2"></div>
      </div>
      <div class="absolute bottom-2 left-2 flex items-center gap-2">
        <img src="community-logo.png" class="w-8 h-8">
        <span class="text-xs">Powered by Stork</span>
      </div>
    </div>

  </div>
</div>

<div class="mt-6 flex flex-col items-center gap-2">
  <input id="usernameInput" placeholder="Username" class="px-3 py-2 rounded" />
  <input id="akaInput" placeholder="A.k.a" class="px-3 py-2 rounded" />
  <select id="roleSelect" class="px-3 py-2 rounded">
    <option>Winged</option>
    <option>Peep</option>
    <option>Songbird</option>
    <option>Wayfinder</option>
    <option>Skymaster</option>
  </select>
  <button id="generateBtn" class="bg-teal-400 text-white px-4 py-2 rounded">Generate</button>
  <button id="flipBtn" class="bg-white text-teal-500 px-4 py-2 rounded">Flip Card</button>
  <button id="downloadBtn" class="bg-green-600 text-white px-4 py-2 rounded">Download PNG</button>
</div>

<script>
const roleIcons = {
  Winged: 'winged.png',
  Peep: 'peep.png',
  Songbird: 'songbird.png',
  Wayfinder: 'wayfinder.png',
  Skymaster: 'skymaster.png'
};

const generateBtn = document.getElementById('generateBtn');
const flipBtn = document.getElementById('flipBtn');
const downloadBtn = document.getElementById('downloadBtn');
const badgeCard = document.getElementById('badgeCard');
const usernameInput = document.getElementById('usernameInput');
const akaInput = document.getElementById('akaInput');
const roleSelect = document.getElementById('roleSelect');

const displayNameFront = document.getElementById('displayNameFront');
const displayAKAFront = document.getElementById('displayAKAFront');
const displayRoleFront = document.getElementById('displayRoleFront');
const roleIconInlineFront = document.getElementById('roleIconInlineFront');
const roleOverlayFront = document.getElementById('roleOverlayFront');

const displayHandleBack = document.getElementById('displayHandleBack');
const displayRoleBack = document.getElementById('displayRoleBack');
const roleIconInlineBack = document.getElementById('roleIconInlineBack');
const qrcodeDiv = document.getElementById('qrcode');

generateBtn.addEventListener('click', ()=>{
  const username = usernameInput.value || 'Username';
  const aka = akaInput.value || '';
  const role = roleSelect.value;

  displayNameFront.textContent = username;
  displayAKAFront.textContent = aka ? 'A.k.a ' + aka : '';
  displayRoleFront.textContent = role;
  roleIconInlineFront.textContent = 'ðŸª½';
  roleOverlayFront.textContent = 'ðŸª½';

  displayHandleBack.textContent = '@' + username;
  displayRoleBack.textContent = role;
  roleIconInlineBack.textContent = 'ðŸª½';

  qrcodeDiv.innerHTML = '';
  new QRCode(qrcodeDiv, { text: 'https://community.com/' + username, width: 120, height: 120 });
});

flipBtn.addEventListener('click', ()=>{
  badgeCard.classList.toggle('flipped');
});

downloadBtn.addEventListener('click', async ()=>{
  const canvas = await html2canvas(badgeCard, {scale:2});
  const link = document.createElement('a');
  link.download = 'badge.png';
  link.href = canvas.toDataURL();
  link.click();
});
</script>

</body>
</html>
